//
//  TranslationService.swift
//  CheckMenu
//
//  Created by Ilya Yakupov on 19.08.2025.
//

import Foundation

class TranslationService: ObservableObject {
    static let shared = TranslationService()
    
    private init() {}
    
    func translateText(_ text: String, completion: @escaping (String) -> Void) {
        // Используем умный переводчик для смешанных языков
        DispatchQueue.global(qos: .userInitiated).async {
            let translated = self.smartTranslate(text)
            
            DispatchQueue.main.async {
                completion(translated)
            }
        }
    }
    
    private func smartTranslate(_ text: String) -> String {
        let words = text.components(separatedBy: .whitespacesAndNewlines)
        let translatedWords = words.map { word in
            let cleanWord = word.trimmingCharacters(in: .punctuationCharacters)
            
            // Определяем язык слова
            if isEnglishWord(cleanWord) {
                // Переводим английские слова
                return translateEnglishWord(cleanWord)
            } else {
                // Оставляем русские и другие слова без изменений
                return word
            }
        }
        
        return translatedWords.joined(separator: " ")
    }
    
    private func isEnglishWord(_ word: String) -> Bool {
        // Проверяем, содержит ли слово только латинские буквы
        let englishPattern = "^[a-zA-Z]+$"
        let regex = try? NSRegularExpression(pattern: englishPattern)
        let range = NSRange(location: 0, length: word.utf16.count)
        
        if let match = regex?.firstMatch(in: word, options: [], range: range) {
            return match.range.location != NSNotFound
        }
        
        return false
    }
    
    private func translateEnglishWord(_ word: String) -> String {
        let translations = getTranslationDictionary()
        return translations[word.lowercased()] ?? word
    }
    
    private func getTranslationDictionary() -> [String: String] {
        return [
            // Основные слова
            "hello": "привет",
            "world": "мир",
            "menu": "меню",
            "food": "еда",
            "drink": "напиток",
            "price": "цена",
            "restaurant": "ресторан",
            "cafe": "кафе",
            "bar": "бар",
            "hotel": "отель",
            
            // Напитки
            "coffee": "кофе",
            "tea": "чай",
            "water": "вода",
            "milk": "молоко",
            "juice": "сок",
            "wine": "вино",
            "beer": "пиво",
            "whiskey": "виски",
            "vodka": "водка",
            "champagne": "шампанское",
            "cocktail": "коктейль",
            "soda": "газировка",
            "lemonade": "лимонад",
            "hot chocolate": "горячий шоколад",
            "espresso": "эспрессо",
            "cappuccino": "капучино",
            "latte": "латте",
            "americano": "американо",
            
            // Еда
            "bread": "хлеб",
            "meat": "мясо",
            "fish": "рыба",
            "chicken": "курица",
            "beef": "говядина",
            "pork": "свинина",
            "lamb": "баранина",
            "salmon": "лосось",
            "tuna": "тунец",
            "shrimp": "креветки",
            "lobster": "омар",
            "crab": "краб",
            "salad": "салат",
            "soup": "суп",
            "pizza": "пицца",
            "pasta": "паста",
            "spaghetti": "спагетти",
            "rice": "рис",
            "potato": "картофель",
            "french fries": "картофель фри",
            "vegetable": "овощ",
            "tomato": "помидор",
            "onion": "лук",
            "garlic": "чеснок",
            "carrot": "морковь",
            "cucumber": "огурец",
            "lettuce": "салат",
            "spinach": "шпинат",
            "broccoli": "брокколи",
            "mushroom": "гриб",
            "bell pepper": "болгарский перец",
            "corn": "кукуруза",
            "bean": "фасоль",
            "lentil": "чечевица",
            "fruit": "фрукт",
            "apple": "яблоко",
            "banana": "банан",
            "orange": "апельсин",
            "lemon": "лимон",
            "lime": "лайм",
            "grape": "виноград",
            "strawberry": "клубника",
            "blueberry": "черника",
            "raspberry": "малина",
            "cherry": "вишня",
            "peach": "персик",
            "pear": "груша",
            "pineapple": "ананас",
            "mango": "манго",
            "kiwi": "киви",
            "avocado": "авокадо",
            "coconut": "кокос",
            "pomegranate": "гранат",
            "watermelon": "арбуз",
            "melon": "дыня",
            
            // Молочные продукты
            "cheese": "сыр",
            "butter": "сливочное масло",
            "yogurt": "йогурт",
            "cream": "сливки",
            "ice cream": "мороженое",
            "cottage cheese": "творог",
            "sour cream": "сметана",
            
            // Приправы и специи
            "salt": "соль",
            "pepper": "перец",
            "sugar": "сахар",
            "honey": "мед",
            "oil": "масло",
            "olive oil": "оливковое масло",
            "vinegar": "уксус",
            "mustard": "горчица",
            "ketchup": "кетчуп",
            "mayonnaise": "майонез",
            "basil": "базилик",
            "oregano": "орегано",
            "thyme": "тимьян",
            "rosemary": "розмарин",
            "parsley": "петрушка",
            "cilantro": "кинза",
            "ginger": "имбирь",
            "cinnamon": "корица",
            "vanilla": "ваниль",
            "nutmeg": "мускатный орех",
            "paprika": "паприка",
            "curry": "карри",
            "chili": "чили",
            "cumin": "зира",
            "coriander": "кориандр",
            "cardamom": "кардамон",
            "cloves": "гвоздика",
            "bay leaves": "лавровый лист",
            
            // Десерты
            "cake": "торт",
            "pie": "пирог",
            "cookie": "печенье",
            "biscuit": "печенье",
            "chocolate": "шоколад",
            "candy": "конфета",
            "sweet treat": "сладкое",
            "dessert": "десерт",
            "pudding": "пудинг",
            "jelly": "желе",
            "jam": "варенье",
            "marmalade": "мармелад",
            "syrup": "сироп",
            "sauce": "соус",
            "dressing": "заправка",
            
            // Время приема пищи
            "breakfast": "завтрак",
            "lunch": "обед",
            "dinner": "ужин",
            "supper": "ужин",
            "snack": "закуска",
            "appetizer": "закуска",
            "starter": "первое блюдо",
            "main course": "основное блюдо",
            "side dish": "гарнир",
            "main dessert": "основной десерт",
            
            // Прилагательные
            "delicious": "вкусный",
            "tasty": "вкусный",
            "good": "хороший",
            "excellent": "отличный",
            "amazing": "потрясающий",
            "wonderful": "замечательный",
            "fantastic": "фантастический",
            "great": "великолепный",
            "perfect": "идеальный",
            "hot": "горячий",
            "cold": "холодный",
            "warm": "теплый",
            "cool": "прохладный",
            "fresh": "свежий",
            "sweet taste": "сладкий",
            "sour": "кислый",
            "bitter": "горький",
            "salty": "соленый",
            "spicy": "острый",
            "mild": "мягкий",
            "soft": "мягкий",
            "hard": "твердый",
            "crispy": "хрустящий",
            "tender": "нежный",
            "juicy": "сочный",
            "dry": "сухой",
            "moist": "влажный",
            "creamy": "сливочный",
            "rich": "богатый",
            "light": "легкий",
            "heavy": "тяжелый",
            "thick": "густой",
            "thin": "тонкий",
            "big": "большой",
            "small": "маленький",
            "large": "большой",
            "medium": "средний",
            "huge": "огромный",
            "tiny": "крошечный",
            "new": "новый",
            "old": "старый",
            "young": "молодой",
            "mature": "зрелый",
            "ripe": "спелый",
            "raw": "сырой",
            "cooked": "приготовленный",
            "fried": "жареный",
            "boiled": "вареный",
            "grilled": "жареный на гриле",
            "baked": "запеченный",
            "steamed": "пареный",
            "roasted": "жареный",
            "smoked": "копченый",
            "marinated": "маринованный",
            "pickled": "маринованный",
            "frozen": "замороженный",
            "organic": "органический",
            "natural": "натуральный",
            "healthy": "здоровый",
            "nutritious": "питательный",
            "low fat": "обезжиренный",
            "fat free": "обезжиренный",
            "sugar free": "без сахара",
            "gluten free": "без глютена",
            "vegetarian": "вегетарианский",
            "vegan": "веганский",
            
            // Действия
            "eat": "есть",
            "to drink": "пить",
            "cook": "готовить",
            "bake": "печь",
            "fry": "жарить",
            "boil": "варить",
            "grill": "жарить на гриле",
            "roast": "жарить",
            "steam": "парить",
            "mix": "смешивать",
            "stir": "мешать",
            "cut": "резать",
            "slice": "нарезать",
            "chop": "рубить",
            "dice": "нарезать кубиками",
            "grate": "натереть",
            "peel": "чистить",
            "wash": "мыть",
            "clean": "чистить",
            "serve": "подавать",
            "order": "заказывать",
            "pay": "платить",
            "buy": "покупать",
            "sell": "продавать",
            "open": "открывать",
            "close": "закрывать",
            "start": "начинать",
            "stop": "останавливать",
            "finish": "заканчивать",
            "continue": "продолжать",
            "wait": "ждать",
            "hurry": "торопиться",
            "slow": "медленный",
            "fast": "быстрый",
            "quick": "быстрый",
            "ready": "готовый",
            "available": "доступный",
            "sold out": "распродано",
            "out of stock": "нет в наличии",
            
            // Вежливые слова
            "thank you": "спасибо",
            "thanks": "спасибо",
            "please": "пожалуйста",
            "you're welcome": "пожалуйста",
            "excuse me": "извините",
            "sorry": "извините",
            "pardon": "извините",
            "yes": "да",
            "no": "нет",
            "okay": "хорошо",
            "ok": "хорошо",
            "sure": "конечно",
            "of course": "конечно",
            "certainly": "конечно",
            "maybe": "возможно",
            "perhaps": "возможно",
            "probably": "вероятно",
            "definitely": "определенно",
            "absolutely": "абсолютно",
            "exactly": "точно",
            "right": "правильно",
            "wrong": "неправильно",
            "correct": "правильно",
            "incorrect": "неправильно",
            "true": "правда",
            "false": "ложь",
            
            // Время
            "today": "сегодня",
            "tomorrow": "завтра",
            "yesterday": "вчера",
            "morning": "утро",
            "afternoon": "день",
            "evening": "вечер",
            "night": "ночь",
            "dawn": "рассвет",
            "sunrise": "восход",
            "sunset": "закат",
            "midnight": "полночь",
            "noon": "полдень",
            "week": "неделя",
            "month": "месяц",
            "year": "год",
            "time": "время",
            "hour": "час",
            "minute": "минута",
            "second": "секунда",
            "moment": "момент",
            "instant": "мгновение",
            "day": "день",
            "monday": "понедельник",
            "tuesday": "вторник",
            "wednesday": "среда",
            "thursday": "четверг",
            "friday": "пятница",
            "saturday": "суббота",
            "sunday": "воскресенье",
            "january": "январь",
            "february": "февраль",
            "march": "март",
            "april": "апрель",
            "may": "май",
            "june": "июнь",
            "july": "июль",
            "august": "август",
            "september": "сентябрь",
            "october": "октябрь",
            "november": "ноябрь",
            "december": "декабрь",
            
            // Числа
            "one": "один",
            "two": "два",
            "three": "три",
            "four": "четыре",
            "five": "пять",
            "six": "шесть",
            "seven": "семь",
            "eight": "восемь",
            "nine": "девять",
            "ten": "десять",
            "eleven": "одиннадцать",
            "twelve": "двенадцать",
            "thirteen": "тринадцать",
            "fourteen": "четырнадцать",
            "fifteen": "пятнадцать",
            "sixteen": "шестнадцать",
            "seventeen": "семнадцать",
            "eighteen": "восемнадцать",
            "nineteen": "девятнадцать",
            "twenty": "двадцать",
            "thirty": "тридцать",
            "forty": "сорок",
            "fifty": "пятьдесят",
            "sixty": "шестьдесят",
            "seventy": "семьдесят",
            "eighty": "восемьдесят",
            "ninety": "девяносто",
            "hundred": "сто",
            "thousand": "тысяча",
            "million": "миллион",
            "billion": "миллиард",
            "first": "первый",
            "second place": "второй",
            "third": "третий",
            "last": "последний",
            "next": "следующий",
            "previous": "предыдущий",
            "another": "другой",
            "other": "другой",
            "same": "тот же",
            "different": "разный",
            "similar": "похожий",
            "equal": "равный",
            "more": "больше",
            "less": "меньше",
            "most": "больше всего",
            "least": "меньше всего",
            "many": "много",
            "much": "много",
            "few": "мало",
            "little": "мало",
            "some": "некоторые",
            "any": "любой",
            "all": "все",
            "every": "каждый",
            "each": "каждый",
            "both": "оба",
            "either": "любой",
            "neither": "ни один",
            "none": "никто",
            "nothing": "ничего",
            "something": "что-то",
            "anything": "что-либо",
            "everything": "все",
            "someone": "кто-то",
            "anyone": "кто-либо",
            "everyone": "все",
            "nobody": "никто",
            "somebody": "кто-то",
            "anybody": "кто-либо",
            "everybody": "все"
        ]
    }
    

}
